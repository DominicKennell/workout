<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Random Workout Generator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        .container {
            text-align: center;
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 320px;
        }

        button {
            background-color: #28a745; /* Bright Green */
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 10px;
            transition: background-color 0.3s, transform 0.2s;
        }

        button:hover {
            background-color: #218838; /* Darker Green */
            transform: scale(1.05);
        }

        .workout-display, .daily-challenge, .store, .achievements {
            margin-top: 20px;
            font-size: 18px;
            line-height: 1.5;
            color: #333;
        }

        .timer, .rest, .coins, .level, .progress {
            margin-top: 10px;
            font-size: 20px;
            color: #007bff; /* Blue */
        }

        .progress {
            height: 20px;
            background-color: #ddd;
            border-radius: 10px;
            width: 100%;
            margin-top: 10px;
            position: relative;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background-color: #28a745; /* Bright Green */
            width: 0;
            border-radius: 10px;
            transition: width 0.5s;
        }

        /* Coin Animation */
        @keyframes spin {
            0% { transform: rotateY(0deg); }
            100% { transform: rotateY(360deg); }
        }

        .coin {
            width: 60px;
            height: 60px;
            margin: 10px auto;
            background-image: url('https://www.clipartmax.com/png/full/121-1216650_gold-coin-png.png');
            background-size: cover;
            animation: spin 1s infinite;
            display: none;
        }

        /* Achievement Animation */
        @keyframes celebrate {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }

        .celebrate {
            display: none;
            animation: celebrate 1s ease-out;
            font-size: 24px;
            color: #ffcc00; /* Gold */
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Random Workout Generator</h1>
        <button id="generateBtn">Start Workout</button>
        <button id="stopBtn">Stop Workout</button>
        <div id="workoutDisplay" class="workout-display"></div>
        <div id="timer" class="timer"></div>
        <div id="rest" class="rest"></div>
        <div id="coins" class="coins">Coins: 0</div>
        <div id="level" class="level">Level: 1</div>
        <div id="progress" class="progress">
            <div id="progress-bar" class="progress-bar"></div>
        </div>
        <div class="coin" id="coinAnimation"></div>
        <div id="dailyChallenge" class="daily-challenge">Daily Challenge: None</div>
        <div id="achievements" class="achievements">Achievements: None</div>
        <div id="store" class="store">
            <h2>Store</h2>
            <button onclick="buyPowerUp()">Buy Power-Up (10 Coins)</button>
        </div>
        <div id="logReps" class="log-reps">
            <h2>Log Your Reps</h2>
            <input type="text" id="repsInput" placeholder="Enter number of reps">
            <button onclick="logReps()">Save Reps</button>
            <div id="repsLog" class="reps-log">Logged Reps: None</div>
        </div>
        <div id="celebrate" class="celebrate">Congratulations!</div>
        <audio id="coinSound" src="https://freesound.org/data/previews/66/66717_931655-lq.mp3"></audio>
    </div>

    <script>
        // List of exercises
        const exercises = [
            "Push-ups - 30 seconds",
            "Jumping Jacks - 1 minute",
            "Plank - 45 seconds",
            "Squats - 20 reps",
            "Burpees - 15 reps",
            "Lunges - 20 reps",
            "Mountain Climbers - 30 seconds",
            "High Knees - 1 minute",
            "Sit-ups - 20 reps"
        ];

        // Helper functions for cookies
        function setCookie(name, value, days) {
            let expires = "";
            if (days) {
                const date = new Date();
                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                expires = "; expires=" + date.toUTCString();
            }
            document.cookie = name + "=" + (value || "") + expires + "; path=/";
        }

        function getCookie(name) {
            const nameEQ = name + "=";
            const ca = document.cookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) === ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }

        // Global variables
        let coins = parseInt(getCookie('coins')) || 0;
        let level = parseInt(getCookie('level')) || 1;
        let progress = parseInt(getCookie('progress')) || 0;
        let repsLog = JSON.parse(getCookie('repsLog')) || {};
        let achievements = [];
        let workoutInterval;
        let restInterval;
        let timerInterval;
        let progressInterval;
        let secondsRemaining = 60;
        let restTime = 30;
        let workoutDuration = 0; // Tracks total workout duration for leveling
        let powerUpActive = false;

        const coinSound = document.getElementById('coinSound');
        const coinAnimation = document.getElementById('coinAnimation');
        const celebrate = document.getElementById('celebrate');

        document.getElementById('coins').innerText = `Coins: ${coins}`;
        document.getElementById('level').innerText = `Level: ${level}`;
        document.getElementById('progress-bar').style.width = `${(progress / 270) * 100}%`;
        document.getElementById('repsLog').innerText = `Logged Reps: ${JSON.stringify(repsLog)}`;

        // Function to generate a random workout
        function generateWorkout() {
            const randomIndex = Math.floor(Math.random() * exercises.length);
            return exercises[randomIndex];
        }

        // Function to display a new workout
        function displayNewWorkout() {
            const workoutDisplay = document.getElementById('workoutDisplay');
            workoutDisplay.innerHTML = generateWorkout();
        }

        // Function to start the workout timer
        function startWorkoutTimer() {
            secondsRemaining = 60;
            document.getElementById('timer').innerText = `Exercise Time: ${secondsRemaining}s`;

            timerInterval = setInterval(() => {
                secondsRemaining--;
                document.getElementById('timer').innerText = `Exercise Time: ${secondsRemaining}s`;
                if (secondsRemaining <= 0) {
                    clearInterval(timerInterval);
                    startRestTimer();
                }
            }, 1000);
        }

        // Function to start the rest timer
        function startRestTimer() {
            document.getElementById('rest').innerText = `Rest Time: ${restTime}s`;

            restInterval = setInterval(() => {
                restTime--;
                document.getElementById('rest').innerText = `Rest Time: ${restTime}s`;
                if (restTime <= 0) {
                    clearInterval(restInterval);
                    restTime = 30;
                    displayNewWorkout(); // Generate new workout
                    startWorkoutTimer(); // Reset workout timer
                }
            }, 1000);
        }

        // Function to increment progress and update progress bar
        function incrementProgress() {
            progress += 10; // Increase by 10 every interval
            if (progress > 270) {
                progress = 270; // Cap progress at 100%
            }
            setCookie('progress', progress, 7); // Update cookie with new progress value
            updateProgressBar();
        }

        // Update progress bar width based on progress value
        function updateProgressBar() {
            document.getElementById('progress-bar').style.width = `${(progress / 270) * 100}%`;
        }

        // Function to start the progress update interval
        function startProgressUpdate() {
            progressInterval = setInterval(incrementProgress, 30000); // Update every 30 seconds
        }

        // Function to stop the progress update interval
        function stopProgressUpdate() {
            clearInterval(progressInterval);
        }

        // Function to start the workout process
        function startWorkout() {
            displayNewWorkout();
            startWorkoutTimer();
            startProgressUpdate(); // Start progress update when workout begins
        }

        // Function to stop the workout
        function stopWorkout() {
            clearInterval(timerInterval);
            clearInterval(restInterval);
            stopProgressUpdate(); // Stop progress update when workout ends
            document.getElementById('timer').innerText = 'Exercise Time: 0s';
            document.getElementById('rest').innerText = 'Rest Time: 0s';
        }

        // Event listeners for buttons
        document.getElementById('generateBtn').addEventListener('click', startWorkout);
        document.getElementById('stopBtn').addEventListener('click', stopWorkout);

        // Dummy functions for store and reps logging
        function buyPowerUp() {
            if (coins >= 10) {
                coins -= 10;
                setCookie('coins', coins, 7);
                document.getElementById('coins').innerText = `Coins: ${coins}`;
                alert('Power-up bought!');
            } else {
                alert('Not enough coins!');
            }
        }

        function logReps() {
            const repsInput = document.getElementById('repsInput').value;
            if (repsInput) {
                repsLog[Date.now()] = repsInput;
                setCookie('repsLog', JSON.stringify(repsLog), 7);
                document.getElementById('repsLog').innerText = `Logged Reps: ${JSON.stringify(repsLog)}`;
                document.getElementById('repsInput').value = '';
            }
        }
    </script>
</body>
</html>
